*<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kalkulator Matematika dengan Musik (Indonesia)</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: url('https://st2.depositphotos.com/1701651/7044/v/950/depositphotos_70447433-stock-illustration-i-love-math.jpg') repeat-x;
    background-size: cover;
    animation: moveBG 40s linear infinite;
  }

  @keyframes moveBG {
    0% { background-position: 0 0; }
    100% { background-position: -2000px 0; }
  }

  .calculator {
    width: 350px;
    border-radius: 5px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.85);
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    position: relative;
    z-index: 20;
  }

  .display {
    width: 95%;
    height: 40px;
    margin-bottom: 6px;
    text-align: right;
    padding: 5px;
    font-size: 20px;
    border-radius: 6px;
    border: 2px solid #1E3A8A;
    background: rgba(255,255,255,0.9);
    box-shadow: 0 0 5px rgba(30, 58, 138, 0.7);
  }

  .convert {
    width: 95%;
    text-align: right;
    font-size: 15px;
    font-weight: bold;
    color: #0b3256;
    margin-bottom: 10px;
    text-shadow: 0 1px 2px rgba(255,255,255,0.6);
  }

  .history-container {
    display: none;
    background: rgba(39, 34, 34, 0.9);
    border: 1px solid #ccc;
    padding: 6px;
    margin-bottom: 10px;
    max-height: 110px;
    overflow-y: auto;
    font-size: 14px;
    border-radius: 6px;
  }

  .buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 6px;
  }

  .button {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 10px 8px;
    font-size: 16px;
    cursor: pointer;
    background-color: rgba(255,255,255,0.35);
    border: 1px solid rgba(2, 2, 2, 0.5);
    border-radius: 6px;
    transition: background 0.2s, transform 0.1s;
    color: #000;
    font-weight: bold;
    user-select: none;
  }

  .button span {
    font-size: 12px;
    color: #333;
    font-weight: normal;
  }

  .button:hover {
    background-color: rgba(255,255,255,0.65);
    transform: translateY(-1px);
  }

  .history-btn { grid-column: span 4; background: #e2d627; color: white; font-weight: bold; }
  .history-btn:hover { background: #e67e22; }
  .convert-btn { background: #3498db; color: white; font-weight: bold; }
  .convert-btn:hover { background: #2980b9; }
  .equal-btn { background-color: #2ecc71; color: white; grid-column: span 4; }
  .clear-btn { background-color: #e74c3c; color: white; grid-column: span 4; }

  .music-btn {
    position: fixed;
    top: 20px;
    left: 20px;
    background-color: #02090a;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    z-index: 30;
  }
</style>
</head>
<body>

<!-- Tombol musik -->
<button class="music-btn" onclick="toggleMusic()">üéµ Musik</button>

<!-- Audio background -->
<audio id="backgroundMusic" loop>
  <source src="gentong.mp3" type="audio/mpeg">
</audio>

<!-- Audio angka bahasa Indonesia -->
<audio id="voice0" src="audio/0.mp3"></audio>
<audio id="voice1" src="audio/1.mp3"></audio>
<audio id="voice2" src="audio/2.mp3"></audio>
<audio id="voice3" src="audio/3.mp3"></audio>
<audio id="voice4" src="audio/4.mp3"></audio>
<audio id="voice5" src="audio/5.mp3"></audio>
<audio id="voice6" src="audio/6.mp3"></audio>
<audio id="voice7" src="audio/7.mp3"></audio>
<audio id="voice8" src="audio/8.mp3"></audio>
<audio id="voice9" src="audio/9.mp3"></audio>

<!-- Audio operator bahasa Indonesia -->
<audio id="voiceplus" src="audio/tambah.mp3"></audio>
<audio id="voiceminus" src="audio/kurang.mp3"></audio>
<audio id="voicemultiply" src="audio/kali.mp3"></audio>
<audio id="voicedivide" src="audio/bagi.mp3"></audio>
<audio id="voiceequal" src="audio/hasil.mp3"></audio>
<audio id="voiceclear" src="audio/bersih.mp3"></audio>
<audio id="voicedot" src="audio/titik.mp3"></audio>
<audio id="voicedollar" src="audio/dolar.mp3"></audio>
<audio id="voiceidr" src="audio/rupiah.mp3"></audio>
<audio id="voiceusd" src="audio/dolar.mp3"></audio>
<audio id="voicehistory" src="audio/riwayat.mp3"></audio>

<div class="calculator">
  <div class="button history-btn" onclick="playSound('history'); toggleHistory()">üìú History</div>
  <div class="history-container" id="history"></div>

  <input type="text" class="display" id="display" disabled>
  <div class="convert" id="convert"></div>

  <div class="buttons">
    <div class="button" onclick="playSound(7); appendToDisplay('7')">7 <span>Tujuh</span></div>
    <div class="button" onclick="playSound(8); appendToDisplay('8')">8 <span>Delapan</span></div>
    <div class="button" onclick="playSound(9); appendToDisplay('9')">9 <span>Sembilan</span></div>
    <div class="button" onclick="playSound('divide'); appendToDisplay('/')">/ <span>Bagi</span></div>

    <div class="button" onclick="playSound(4); appendToDisplay('4')">4 <span>Empat</span></div>
    <div class="button" onclick="playSound(5); appendToDisplay('5')">5 <span>Lima</span></div>
    <div class="button" onclick="playSound(6); appendToDisplay('6')">6 <span>Enam</span></div>
    <div class="button" onclick="playSound('multiply'); appendToDisplay('*')">*</div>

    <div class="button" onclick="playSound(1); appendToDisplay('1')">1 <span>Satu</span></div>
    <div class="button" onclick="playSound(2); appendToDisplay('2')">2 <span>Dua</span></div>
    <div class="button" onclick="playSound(3); appendToDisplay('3')">3 <span>Tiga</span></div>
    <div class="button" onclick="playSound('minus'); appendToDisplay('-')">- <span>Kurang</span></div>

    <div class="button" onclick="playSound(0); appendToDisplay('0')">0 <span>Enol</span></div>
    <div class="button" onclick="playSound('dot'); appendToDisplay('.')">. <span>Titik</span></div>
    <div class="button" onclick="playSound('dollar'); appendToDisplay('$')">$ <span>Dolar</span></div>
    <div class="button" onclick="playSound('plus'); appendToDisplay('+')">+ <span>Tambah</span></div>

    <div class="button equal-btn" onclick="playSound('equal'); calculate()">= <span>Hasil</span></div>
    <div class="button convert-btn" onclick="playSound('idr'); convertToUSD()" style="grid-column: span 2;">IDR ‚Üí USD</div>
    <div class="button convert-btn" onclick="playSound('usd'); convertToIDR()" style="grid-column: span 2;">USD ‚Üí IDR</div>
    <div class="button clear-btn" onclick="playSound('clear'); clearDisplay()">C <span>Bersih</span></div>
  </div>
</div>

<script>
const display = document.getElementById('display');
const historyBox = document.getElementById('history');
const convertBox = document.getElementById('convert');
const music = document.getElementById('backgroundMusic');
let history = [];
const rateUSD = 15000;

function playSound(key) {
  let audio = document.getElementById('voice' + key);
  if(audio){
    audio.currentTime = 0;
    audio.play();
  }
}

function appendToDisplay(value) {
  let current = display.value.replace(/\./g, '');
  current += value;
  if(!isNaN(current)) {
    display.value = Number(current).toLocaleString('id-ID');
  } else {
    display.value = current;
  }
  convertBox.textContent = '';
}

function clearDisplay() {
  display.value = '';
  convertBox.textContent = '';
}

function calculate() {
  try {
    let expression = display.value.replace(/\./g, '').replace(/\$/g, '');
    let result = new Function('return ' + expression)();
    let formattedResult = result.toLocaleString('id-ID');
    history.push(display.value + " = " + formattedResult);
    historyBox.innerHTML = history.map(h => "<div>" + h + "</div>").join("");
    display.value = formattedResult;
    convertBox.textContent = '';
  } catch {
    display.value = 'Error';
    convertBox.textContent = '';
  }
}

function toggleHistory() {
  historyBox.style.display = (historyBox.style.display === "block") ? "none" : "block";
}

function convertToUSD() {
  let val = parseFloat(display.value.replace(/\./g, '').replace(/\$/g, ''));
  if (!isNaN(val)) {
    let usd = val / rateUSD;
    convertBox.textContent = "= " + usd.toLocaleString('id-ID', {minimumFractionDigits:2, maximumFractionDigits:2}) + " USD";
  }
}

function convertToIDR() {
  let val = parseFloat(display.value.replace(/\./g, '').replace(/\$/g, ''));
  if (!isNaN(val)) {
    let idr = val * rateUSD;
    display.value = idr.toLocaleString('id-ID');
    convertBox.textContent = "= " + idr.toLocaleString('id-ID') + " IDR";
  }
}

function toggleMusic() {
  if (music.paused) {
    music.play().then(() => {
      console.log("‚úÖ Musik mulai diputar");
    }).catch(err => {
      console.error("‚ùå Error play musik:", err);
      alert("Musik tidak bisa diputar. Cek nama file, letak file, atau formatnya (harus .mp3).");
    });
  } else {
    music.pause();
    console.log("‚è∏ Musik dijeda");
  }
}
</script>
</body>
</html>
